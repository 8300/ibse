<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<link rel="stylesheet" href="../../../github/html/css/main.css" type="text/css" />
	<title>建科网关</title>
</head>
<script LANGUAGE="JAVASCRIPT">
	function svc_connectPlatform() {
		//alert("");
		var wsServer = 'ws://192.168.1.111:4444/';
		try {
			svc_websocket = new WebSocket(wsServer);
		} catch (evt) {
			console.log("new WebSocket error:" + evt.data);
			svc_websocket = null;
			if (typeof(connCb) != "undefined" && connCb != null)
				connCb("-1", "connect error!");
			return;
		}
		//alert("");
		svc_websocket.onopen = svc_onOpen;
		svc_websocket.onclose = svc_onClose;
		svc_websocket.onmessage = svc_onMessage;
		svc_websocket.onerror = svc_onError;
	}
	function svc_onOpen(evt) {
		console.log("Connected to WebSocket server.");
	}
	function svc_onClose(evt) {
		console.log("Disconnected");
	}
	function svc_onMessage(evt) {
		console.log('Retrieved data from server: ' + evt.data);
		obj = JSON.parse(evt.data);
		length = Object.keys(obj.DATA).length;
		for (i = 0; i < length; i++) {
			document.getElementById(obj.DATA[i][0]).innerHTML = obj.DATA[i][1];
		}
		document.getElementById("time").innerHTML = obj.TIME;
	}
	function svc_onError(evt) {
		console.log('Error occured: ' + evt.data);
	}
	function svc_send() {
		if (svc_websocket.readyState == WebSocket.OPEN) {
		var buf = document.getElementById("buf");
		var msg = buf.value;
		console.log(msg);
		svc_websocket.send(msg);
		} else {
		console.log("send failed. websocket not open. please check.");
		}
	}

	function web(){
		var text = '{ "sites" : [' +
		    '{ "id":"514" , "value":"23" },' +
		    '{ "name":"Google" , "url":"www.google.com" },' +
		    '{ "name":"Taobao" , "url":"www.taobao.com" } ]}';

		obj = JSON.parse(text);
		document.getElementById(obj.sites[0].id).innerHTML = obj.sites[0].value;
	}
	function copyText(){
		var myselect=document.getElementById("select");
		console.log("fds");
	}
	function box_show(name){
		console.log(name);
		var myselect=document.getElementById(name);
		myselect.style.display="";
	}
</script>
<!--
	<div style="position:fixed; color:black; height:300px; width:12vwpx; float:left;">
	<ul>
		<li><a href="#interface">接口表</a></li>
		<li><a href="#device">设备表</a></li>
		<li><a href="#point">点值表</a></li>
	</ul>
	<button onclick="svc_connectPlatform()"> connect</button><br>
	<button onclick="svc_send()"> send</button><br>
	</div>
	<div class="div_column" style="width:88vw; float:left; padding:0 0 0 100px;">
-->
<body>
<div class="div_row">
